<template name="card_edit_info">
	<div id="card-create-screen" class="create-screen">
		<!-- <h1 class="awning title">CARD CREATOR</h1> -->
		<div class="input-area">
			<div class='container'>
				{{> card_info_form }}
				{{> rules_form }}
			</div>
		</div>
		<div id='problem-container'>
				{{> card_preview }}
		</div>
		
	</div>
</template>

<template name="card_info_form">
	{{#ui form_init}}
		<textarea name="template" placeholder="Template"></textarea>
		<input id='solution' name="solution" placeholder="Solution"/>
	{{/ui}}
</template>


<template name="rules_form">
	<div id="rules_form">
		{{#each rules}}
			<div class='input-container' style='position: relative;'>
				<input id='rule-{{idx}}' class="set-rule new-rule" value='{{val}}' />
				<div class='cancel'>x</div>
			</div>
		{{/each}}
		<input id="add-rule" class='set-rule' name='rule' placeholder='Add Rule' />
		<div>{{error}}</div>
		<div id='design-card' class='red-button'>PUBLISH</div>
	</div>
</template>

<!-- <template name="rules_form">
	<div id="rules_form">
		{{> add_rule_dialog}}
		<div id="add-rule">Add Rule</div>
		<div class="rules">
			{{#each rules}}
				<div class="rule">{{this}}</div>
			{{/each}}
		</div>
	</div>
</template> -->

<template name="card_preview">
	<div id="problem" style='margin-top: {{margin}}'>
		{{#with problemized}}
			<div id="card-question">
				{{#markdown}}{{{html}}}{{/markdown}}
				<div id="card-solution">
					{{#if solution}}{{solution}}{{/if}}
				</div>
			</div>
		{{/with}}	
	</div>
	
</template>


<template name="card_front">
	<div id='card-front-screen'>
		{{> create_menu}}
		<div class="parchment">
			{{> card_front_form}}
		</div>
		<div class='card-preview'>
			{{> card_front_preview}}
		</div>
		{{> back_to_collection}}
	</div>
</template>

<template name='card_front_form'>
		{{#ui init_form}}
			<label for='title'>Title</label> 
			<input name='title'/>
			<label for='tags'>Categories</label>
			<input name='tags'/>
			<label for='grade'>Grade Level</label>
			<input name='grade'/>
			<label for='description'>Description</label>
			<textarea name="description"></textarea>
			<label for='image-upload'>Image<small>300 x 400</small></label>
			<!-- XXX is multiple right? -->
			<div id='file-upload-box'>
				<input tabindex='-1' id='image-filename' name="image"/>
				<input onfocus='$(this).click()' id="image-upload" type="file" multiple/>
			</div>
		{{/ui}}
</template>

<template name='card_front_preview'>
	{{#with card}}
		<div id='card-edit' {{#if image}} style='background-image: url({{image}}); background-size: cover; background-position: center center; background-repeat: no-repeat;' {{/if}}></div>
		<h4 class='card-title'>{{#if title}} {{title}} {{/if}}</h4>
	{{/with}}
	<div id='save-card'>NEXT</div>
</template>
	