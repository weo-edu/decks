<template name="deck_browse">
	<svg style='height: 0; position: absolute;'>
		<defs>
		    <filter id="innerbevel" x0="-50%" y0="-50%" width="200%" height="200%">
				<feGaussianBlur in="SourceAlpha" stdDeviation="2" result="blur"/>
				<feOffset in='blur' dy="-5" dx="-5"/>
				<feComposite in2="SourceAlpha" operator="arithmetic"
						k2="-1" k3="1" result="hlDiff"/>
				<feFlood flood-color="black" flood-opacity=".6"/>
				<feComposite in2="hlDiff" operator="in"/>
				<feComposite in2="SourceGraphic" operator="over" result="withGlow"/>

				<feOffset in="blur" dy="5" dx="5"/>
				<feComposite in2="SourceAlpha" operator="arithmetic"
						k2="-1" k3="1" result="shadowDiff"/>
				<feFlood flood-color="black" flood-opacity=".6"/>
				<feComposite in2="shadowDiff" operator="in"/>
				<feComposite in2="withGlow" operator="over"/>
			</filter>
	  	</defs>
	</svg>
	<div id='browse-screen'>
		<div class='select-placeholder'></div>
		<div class='browse'>
			<div class='awning'>
				BROWSE
			</div>
			{{#if currentUser}}
			{{#if currentUser.decks}}
			<div id='my-decks' class='shelf'>
				{{#iter mydecks}}
					{{> deck_view}}
				{{/iter}}
			</div>
			{{/if}}
			{{/if}}
			<div id='deck-grid' class='shelf'>
				<div class='shelf-wrapper'>
					{{> decks}}
				</div>
			</div>
		</div>
	</div>
</template>

<template name="decks">
		{{#iter decks}}
			{{> deck_view}}
		{{/iter}}
		{{{dialog "deck_more" template="deck_more"}}}
</template>

<template name="deck_view">
	<div id="deck-{{idx}}" class='deck-container'>
	<svg class="deck">
		<polygon points='8,3 130,0 140,7 0,10' fill='{{colorScheme.primary}}' stroke='{{colorScheme.secondary}}' stroke-width='1' filter='url(#innerbevel)' />
		<polygon points='0,10 140,7 130,172, 12,180' fill='{{colorScheme.primary}}' stroke='{{colorScheme.secondary}}' stroke-width='1' filter='url(#innerbevel)'/>
		<image x="45" y="70" width="48px" height="48px"
         xlink:href="/{{image}}"></image>
         <text x="30" y="50" width="48px" height="48px">{{title}}</text>
	</svg>
	<div class='shadow'></div>
	</div>
</template>


<template name="deck_more">

	<h2>{{title}}</h2>
	<div class='more-info'>
		<div class='deck-image'>
			<svg class="deck">
				<polygon points='8,3 130,0 140,7 0,10' fill='{{colorScheme.primary}}' stroke='{{colorScheme.secondary}}' stroke-width='1' filter='url(#innerbevel)' />
				<polygon points='0,10 140,7 130,172, 12,180' fill='{{colorScheme.primary}}' stroke='{{colorScheme.secondary}}' stroke-width='1' filter='url(#innerbevel)'/>
				<image x="45" y="70" width="48px" height="48px"
		         xlink:href="/{{image}}"></image>
		         <text x="30" y="50" width="48px" height="48px">{{title}}</text>
			</svg>
			<p> UNLOCKED 1 OF 10 </p>
		</div>
		<div class='deck-meta'>
			<div class='meta'>
				<h3>DESCRIPTION:</h3>
				<p>{{description}}</p>
				<div class='clear'></div>
			</div>
			<div class='meta'>
				<h3>Categories:</h3>
				<p>{{tags}}</p>
				<div class='clear'></div>
			</div>
			<div class='meta'>
				<h3>Grade Level:</h3>
				<p>{{gradePrior}}</p>
				<div class='clear'></div>
			</div>
			<div rel="{{title}}" class='play-button'></div>
		</div>
	</div>

</template>