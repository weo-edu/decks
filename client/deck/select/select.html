<template name='cards_select'>
	<div id='select-screen'>
		<div class='scene'>
			<div id='players-area'>
				<div class='user-1'>
					{{> user currentUser}}
				</div>

				{{#with deck}}
					{{> chosen_deck_view}}
				{{/with}}

				<div class='user-2'>
					{{> user opponent}}
				</div>
			</div>
			<h1>SELECT YOUR OPPONENTS CARDS</h1>
			{{> card_selection cards}}
			<div class='play-button' rel='{{title}}'></div>
			<p id='chosen' >CHOSEN <span class='chosen'>0</span> OF {{nCards}}</p>
		</div>r
		{{#ui "dialog"}}
			{{{ message }}}
		{{/ui}}
	</div>
</template>

<template name="await_select">
	Waiting for the other player to select your cards
</template>

<template name='card_selection'>
	<div id='card-grid'>
		<div class='shelf-wrapper'>
		{{#each this}}
			<div class='card' style='background-image: url(/{{graphic}}); background-color: {{deck.colorScheme.secondary}}'>
				{{name}}
			</div>
		{{/each}}
		</div>
	</div>
	<div class='next'></div>
</template>

<template name='user'>
	<div class='user'>
		<div class='avatar-tmb' style='background-image: url({{avatar}})'></div>
		<p>{{username}}</p>
	</div>
</template>

<template name='chosen_deck_view'>
	<div class='deck'>
		<svg class="deck">
			<defs>
			    <filter id="innerbevel" x0="-50%" y0="-50%" width="200%" height="200%">
					<feGaussianBlur in="SourceAlpha" stdDeviation="2" result="blur"/>
					<feOffset in='blur' dy="-5" dx="-5"/>
					<feComposite in2="SourceAlpha" operator="arithmetic"
							k2="-1" k3="1" result="hlDiff"/>
					<feFlood flood-color="black" flood-opacity=".6"/>
					<feComposite in2="hlDiff" operator="in"/>
					<feComposite in2="SourceGraphic" operator="over" result="withGlow"/>

					<feOffset in="blur" dy="5" dx="5"/>
					<feComposite in2="SourceAlpha" operator="arithmetic"
							k2="-1" k3="1" result="shadowDiff"/>
					<feFlood flood-color="black" flood-opacity=".6"/>
					<feComposite in2="shadowDiff" operator="in"/>
					<feComposite in2="withGlow" operator="over"/>
				</filter>
		  	</defs>
			<polygon points='8,3 130,0 140,7 0,10' fill='{{colorScheme.primary}}' stroke='{{colorScheme.secondary}}' stroke-width='1' filter='url(#innerbevel)' />
			<polygon points='0,10 140,7 130,172, 12,180' fill='{{colorScheme.primary}}' stroke='{{colorScheme.secondary}}' stroke-width='1' filter='url(#innerbevel)'/>
			<image x="45" y="70" width="48px" height="48px"
	         xlink:href="/{{image}}"></image>
	         <text x="30" y="50" width="48px" height="48px">{{title}}</text>
		</svg>
	</div>
</template>

<template name='max_cards'>
	<h2>Whoops!</h2>
	<p>You've already selected the maximum number of cards allowed per game.</p>
</template>