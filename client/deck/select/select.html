<template name='cards_select'>
	<div id='select-screen'>
		<div class='scene'>
			<div id='players-area'>
				<div id='me' class='user-1'>
					{{> user currentUser}}
				</div>

				{{#with deck}}
					{{> deck_view}}
					<!-- <h4 class='deck-title'>{{title}}</h4> -->
				{{/with}}

				<div id='opponent' class='user-2'>
					{{> user opponent}}
				</div>
			</div>
			<div class='awning title'>SELECT YOUR OPPONENTS CARDS {{> num_selected}}</div>
			{{> card_selection cards}}
			<div class='play-button'>GO</div>
			
		</div>
		{{#ui "dialog"}}
			{{{ message }}}
		{{/ui}}
	</div>
</template>

<template name="num_selected">
	({{selected}} OF {{nCards}})
</template>

<template name="await_select">
	Waiting for the other player to select your cards
</template>

<template name='card_selection'>
	<div class='small-grid'>
		<div class='shelf-wrapper'>
		{{#each this}}
			<div class='deck-container'>
				{{> card_selection_view}}
			</div>
		{{/each}}
		</div>
	</div>
</template>

<template name='user'>
	<div class='user'>
		<div class='avatar-tmb' style='background-image: url({{avatar}})'></div>
		<p>{{username}}</p>
		{{#unless select}}
			{{> progress_bar}}
		{{/unless}}
	</div>
</template>

<template name='progress_bar'>
	<div class='bar'>
		<div class='fill' style="height:{{progress}}"></div>
	</div>
</template>

<template name='max_cards'>
	<h2>Whoops!</h2>
	<p>You've already selected the maximum number of cards allowed per game.</p>
</template>

<template name='card_selection_view'>
	{{#isolate}}
	{{#if selectionCount}}
		<div class="selection-count">
			{{selectionCount}}
		</div>
		{{/if}}
	</div>
	{{/isolate}}
	
	{{> card_view}}
	<h4 class='deck-title'>{{title}}</div>
</template>

<template name='card_view'>
	<div title="Grade: {{grade}}" class='card' style='background-image: url({{image}});'>
		{{#if showStats}}
			{{#with stats}}
				<div class='points-banner'>
					<div class='points'>{{points.val}}</div>
				</div>
				<div class='stats-box'>
					<ul>
						{{> stat_circle speed}}
						{{> stat_circle accuracy}}
						{{> stat_circle retention}}
					</ul>	
				</div>
				{{/with}}
		{{/if}}
	</div>
</template>

<template name='stat_circle'>
	<li class='stat-circle'>
		<div class='inner' style='{{hide}}'>
				<div class='first-semi' style='{{prefix}}{{rotate}}'></div>
				<div class='second-semi' style='{{prefix}}{{rotateSecond}}'></div>
		</div>
		<div class='icon {{name}}'></div>
	</li>
</template>